<div fxLayout="row" fxLayoutAlign="center" class="ml-230">
    <div fxLayout="column" fxFlex="900px">
        <form class="mt-20" #pessoas_cadFrm="ngForm" (ngSubmit)="salvar()">
            <mat-card>
                <mat-card-header fxLayoutAlign="center">
                    <mat-card-title class="color-blue">Pessoa</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="200px" >
                            <img mat-card-image class="img-card mt-20 mb-40"
                                [src]="pessoa.imagem"
                                (error)="pessoa.imagem = 'assets/sem_imagem.png'"
                            >
                        </div>
                        <div fxLayout="column" fxFlex="100px" fxLayoutAlign="center" >
                            <button mat-icon-button class="img-card" fxFlex="70px" fxLayoutAlign="center" type="button" (click)="carregarImagem()"  >
                                <mat-icon fontIcon="add_a_photo" class="img-card color-font" style="font-size: 50px;" fxLayoutAlign="center center"></mat-icon>
                            <input type="file" #inputImagem accept="image/*" style="display: none;" (change)="ajustarSalvarImagem($event)">                                
                            </button>
                            <mat-label fxLayoutAlign="center" class="label-foto color-font">Alterar foto</mat-label>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="800px">
                            <mat-form-field class="full-width"  appearance="outline">
                                <mat-label>Nome Completo: *</mat-label>
                                <input  type="text" 
                                        name="nome"
                                        [(ngModel)]="pessoa.nome"
                                        placeholder="Digite o nome completo da pessoa" 
                                        matInput/>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="200px">
                            <mat-form-field class="full-width"  appearance="outline">
                                <mat-label>Data de Nascimento: </mat-label>
                                <input  type="date" 
                                        name="data_nascimento"
                                        [(ngModel)]="pessoa.data_nascimento"
                                         matInput/>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="200px">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Telefone: *</mat-label>
                                <input  type="text" 
                                        name="telefone"
                                        placeholder="Ex: (99) 99999-9999" 
                                        mask="(99) 99999-9999"
                                        [(ngModel)]="pessoa.telefone"
                                        matInput/>
                            </mat-form-field>
                        </div>
                        <div fxLayout="column" fxFlex="565px" class="ml-35">
                            <mat-form-field class="full-width"  appearance="outline">
                                <mat-label>E-mail: </mat-label>
                                <input  type="text" 
                                        name="email"
                                        [(ngModel)]="pessoa.email"
                                        placeholder="Ex: pessoa@email.com.br" 
                                        matInput/>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="800px">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Endereço: </mat-label>
                                <input  type="text" 
                                        name="endereco_logradouro"
                                        [(ngModel)]="pessoa.endereco_logradouro"
                                        placeholder="Ex: Rua das Flores" 
                                        matInput/>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="200px">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Número:</mat-label>
                                <input  type="text" 
                                        name="endereco_numero"
                                        [(ngModel)]="pessoa.endereco_numero"
                                        placeholder="Ex: 999" 
                                        matInput/>
                            </mat-form-field>
                        </div>
                        <div fxLayout="column" fxFlex="565px" class="ml-35">
                            <mat-form-field class="full-width"  appearance="outline">
                                <mat-label>Complemento: </mat-label>
                                <input  type="text" 
                                        name="endereco_complemento"
                                        [(ngModel)]="pessoa.endereco_complemento"
                                        placeholder="Ex: Apto 99" 
                                        matInput/>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="550px">
                            <mat-form-field class="full-width"  appearance="outline">
                                <mat-label>Bairro: </mat-label>
                                <input  type="text" 
                                        name="endereco_bairro"
                                        [(ngModel)]="pessoa.endereco_bairro"
                                        placeholder="Digite o bairro" 
                                        matInput/>
                            </mat-form-field>
                        </div>
                        <div fxLayout="column" fxFlex="215px" class="ml-35">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>CEP: </mat-label>
                                <input  type="text" 
                                        name="endereco_cep"
                                        [(ngModel)]="pessoa.endereco_cep"
                                        mask="99999-999"
                                        placeholder="Ex: 99999-999" 
                                        matInput/>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="150px">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>UF: </mat-label>
                                <mat-select [(value)]="pessoa.endereco_uf" 
                                            (selectionChange)="carregarMunicipios($event)">
                                    <mat-option *ngFor="let uf of estados" [value]="uf.sigla">
                                        {{uf.sigla}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxLayout="column" fxFlex="615px" class="ml-35">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Cidade:</mat-label>
                                <mat-select [(value)]="pessoa.endereco_cidade" >
                                    <mat-option *ngFor="let m of municipios" [value]="m.nome">
                                        {{m.nome}}
                                    </mat-option>
                                </mat-select>
                                <mat-hint>Selecione uma UF para disponibilizar a lista de cidades</mat-hint>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start" fxLyoutGap="16px">
                        <div fxLayout="column" fxFlex="800px">
                            <mat-form-field class="full-width" appearance="outline">
                                <mat-label>Equipe: </mat-label>
                                <mat-select [(value)]="equipeNome">
                                    <mat-option *ngFor="let equipe of equipes" [value]="equipe.nome">
                                        {{equipe.nome}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                </mat-card-content>
                <mat-card-actions class="mt-60 mb-40" fxLayoutAlign="center">
                    <button mat-flat-button class="ml-5" color="accent" fxFlex="40%" type="button" routerLink="/pessoas">
                        <mat-icon fontIcon="backspace"></mat-icon>
                        Descartar
                    </button>                     
                    @if(!atualizando){
                        <button mat-flat-button class="ml-35" color="primary" fxFlex="40%" type="submit">
                            <mat-icon fontIcon="save"></mat-icon>
                            Salvar
                        </button>                     
                    }@else{
                        <button mat-flat-button class="ml-35" color="primary" fxFlex="40%" type="submit">
                            <mat-icon fontIcon="refresh"></mat-icon>
                            Alterar cadastro
                        </button>                     
                    }
                </mat-card-actions>
            </mat-card>
        </form>
    </div>
</div>
